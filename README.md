### Инструкция по использованию
Сначала необходимо запустить сервер из командной строки при помощи команды `python3 new_server.py`с желаемыми опциями. Опции включают в себя IP-адрес и порт, на которых будет работать сервер:
```
optional arguments:
  -h, --help   show this help message and exit
  --ip IP      server IP address
  --port PORT  server port

```
По умолчанию сервер запускается по адресу 0.0.0.0 на порту 1234.
После этого можно запускать клиенты чата. Для запуска клиента необходимо ввести команду `python3 new_client.py` с желаемыми опциями, формат которых полностью совпадает с указанным выше для сервера. Разница в том, что вводимые адрес и порт относятся к серверу, к которому клиент желает подсоединиться.
По умолчанию клиент соединяется с сервером по адресу 127.0.0.1 на порту 1234.
После старта клиента предлагается ввести имя, после чего выполняется вход в чат и обмен сообщениями. Для выхода из чата необходимо ввести '!exit!' и нажать Enter.

### Описание используемого протокола.
Каждое сообщение начинается с кода, всего кодов 4:
```
NAM = 1  # сообщение с именем клиента. Отправляется клиентом в начале соединения, перед отправкой сообщений
MES = 2  # сообщение клиента, вводимое в чат
PER = 3  # ответ сервера на установление соединения
END = 4  # сигнализируещее о конце соединения сообщение
```
Формат сообщений:
```
NAM  # opcode | name
MES  # opcode | optional name | 0 | data | 0 
PER  # opcode | server message 
END  # opcode
```
Время вычисляется и выводится на стороне клиента, в состав самих сообщений не входит.
Поле optional name типа сообщений MES используется сервером при отправке сообщения клиентам и клиентом при приёме сообщений от сервера. При отправке сообщений клиентом оно не спользуется, поскольку имя клиента запоминается сервером в начале соединения. Таким образом, клиент отправляет сообщения типа MES, заполняя поля opcode и data.

Процесс установления соединения:
1) после установления TCP-соединения клиент отправляет на сервер пакет NAM со своим именем.
2) Сервер принимает пакет, отвечает пакетом PER с приветственным сообщением.
3) Клиент, получив PER, переходит в режим отправки / принятия сообщений.

Процесс разрыва содинения со стороны клиента:
1) Клиент отправляет END.
2) Сервер принимает пакет END, отвечает пакетом того же типа, выходит из потока обработки сообщений данного клиента.
3) Клиент получает END, выходит из потока чтения сообщений от сервера и цикла чтения из stdin, программа завершается.

Процесс разрыва соединения со стороны сервера:
1) Сервер отправляет END.
2) Клиент получает END, выходит из потока чтения сообщений от сервера и цикла чтения из stdin, программа завершается.

### Демонстрация работа программы
Работа сервера выглядит следующим образом:
```
Server is starting at 0.0.0.0 : 1234
new client: ('127.0.0.1', 52540), name: dog
new client: ('127.0.0.1', 52534), name: frog
dog disconnected
```
Отображается, где работает сервер и кто подключается/отключается.

Работа одного клиента:
```
Server address 127.0.0.1 : 1234
Enter your name:
dog
dog has joined chat!
henlo
<18:41>[dog]: henlo

frog has joined chat!
<18:41>[frog]: how are you

fine, thanks! bye
<18:42>[dog]: fine, thanks! bye

!exit!
Ending connection with server
Connection with server ended. If client is still running, press Enter
```
Работа второго клиента:
```
Server address 127.0.0.1 : 1234
Enter your name:
frog
frog has joined chat!
how are you
<18:41>[frog]: how are you

<18:42>[dog]: fine, thanks! bye
```



